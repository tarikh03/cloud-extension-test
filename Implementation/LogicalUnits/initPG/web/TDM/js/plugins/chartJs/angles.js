var angles=angular.module("angles",[]);angles.chart=function(type){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function($scope,$elem){var ctx=$elem[0].getContext("2d"),autosize=!1;$scope.size=function(){$scope.width<=0?($elem.width($elem.parent().width()),ctx.canvas.width=$elem.width()):(ctx.canvas.width=$scope.width||ctx.canvas.width,autosize=!0),$scope.height<=0?($elem.height($elem.parent().height()),ctx.canvas.height=ctx.canvas.width/2):(ctx.canvas.height=$scope.height||ctx.canvas.height,autosize=!0)},$scope.$watch("data",(function(newVal,oldVal){chartCreated&&chartCreated.destroy(),newVal&&($scope.chart&&(type=$scope.chart),autosize&&($scope.size(),chart=new Chart(ctx)),($scope.responsive||$scope.resize)&&($scope.options.responsive=!0),void 0!==$scope.responsive&&($scope.options.responsive=$scope.responsive),(chartCreated=chart[type]($scope.data,$scope.options)).update(),$scope.legend&&angular.element($elem[0]).parent().after(chartCreated.generateLegend()))}),!0),$scope.$watch("tooltip",(function(newVal,oldVal){if(chartCreated&&chartCreated.draw(),void 0!==newVal&&chartCreated.segments&&!(!isFinite(newVal)||newVal>=chartCreated.segments.length||newVal<0)){var activeSegment=chartCreated.segments[newVal];activeSegment.save(),activeSegment.fillColor=activeSegment.highlightColor,chartCreated.showTooltip([activeSegment]),activeSegment.restore()}}),!0),$scope.size();var chartCreated,chart=new Chart(ctx)}}},angles.directive("chart",(function(){return angles.chart()})),angles.directive("linechart",(function(){return angles.chart("Line")})),angles.directive("barchart",(function(){return angles.chart("Bar")})),angles.directive("radarchart",(function(){return angles.chart("Radar")})),angles.directive("polarchart",(function(){return angles.chart("PolarArea")})),angles.directive("piechart",(function(){return angles.chart("Pie")})),angles.directive("doughnutchart",(function(){return angles.chart("Doughnut")})),angles.directive("donutchart",(function(){return angles.chart("Doughnut")}));