angular.module("offClick",["ngTouch"]).directive("offClick",(function($document,$parse,$timeout){return{restrict:"A",compile:function(tElement,tAttrs){var fn=$parse(tAttrs.offClick);return function(scope,iElement,iAttrs){function eventHandler(ev){iElement[0].contains(ev.target)?$document.one("click touchend",eventHandler):scope.$apply((function(){fn(scope)}))}scope.$watch(iAttrs.offClickActivator,(function(activate){activate?$timeout((function(){$document.one("click touchend",eventHandler)})):$document.off("click touchend",eventHandler)}))}}}}));