function referenceTaskTable(){return{restrict:"E",templateUrl:"views/tasks/referenceTaskTable.html",scope:{data:"=",getVersions:"="},controller:function($scope,TDMService,$timeout,DTOptionsBuilder,DTColumnBuilder,$q,toastr,$compile){var referenceTaskTableCtrl=this;referenceTaskTableCtrl.dtInstance={},referenceTaskTableCtrl.dtColumns=[],referenceTaskTableCtrl.dtColumnDefs=[],referenceTaskTableCtrl.data=$scope.data,referenceTaskTableCtrl.headers=[{column:"actions",name:""},{column:"logical_unit_name",name:"LU Name"},{column:"interface_name",name:"Interface Name"},{column:"reference_table_name",name:"Reference Table Name"}];for(var renderSelectionColumn=function(data,type,full,meta){return'<input type="checkbox" ng-change="referenceTaskTableCtrl.selectionChange(referenceTaskTableCtrl.data['+meta.row+'])" name="referenceTableSelection" ng-model="referenceTaskTableCtrl.data['+meta.row+'].selected" ng-value="referenceTaskTableCtrl.data['+meta.row+'].selected"  style="display:block !importnant; opacity:1 !importnant;">'},i=0;i<referenceTaskTableCtrl.headers.length;i++)"actions"==referenceTaskTableCtrl.headers[i].column?referenceTaskTableCtrl.dtColumns.push(DTColumnBuilder.newColumn(referenceTaskTableCtrl.headers[i].column).withTitle(referenceTaskTableCtrl.headers[i].name).renderWith(renderSelectionColumn).withOption("width","70")):referenceTaskTableCtrl.dtColumns.push(DTColumnBuilder.newColumn(referenceTaskTableCtrl.headers[i].column).withTitle(referenceTaskTableCtrl.headers[i].name));referenceTaskTableCtrl.dtOptions=DTOptionsBuilder.fromFnPromise((function(){return(deferred=$q.defer()).resolve(referenceTaskTableCtrl.data),deferred.promise;var deferred})).withDOM('<"html5buttons"B>lTfgitp').withOption("createdRow",(function(row){$compile(angular.element(row).contents())($scope)})).withOption("scrollX",!1).withOption("lengthChange",!1).withOption("paging",!1).withButtons([]).withOption("caseInsensitive",!0).withOption("search",{caseInsensitive:!1}).withOption("order",[1,"asc"]),referenceTaskTableCtrl.dtOptions.withLightColumnFilter({1:{type:"text"},2:{type:"text"},3:{type:"text"},4:{type:"text"}}),referenceTaskTableCtrl.selectionChange=function(refTable,selectAll){if(refTable.selected&&_.countBy(referenceTaskTableCtrl.data,{interface_name:refTable.interface_name,schema_name:refTable.schema_name,reference_table_name:refTable.reference_table_name,selected:!0}).true>1)return $timeout((function(){refTable.selected=!1})),void toastr.error(refTable.schema_name+"."+refTable.reference_table_name,"Duplicate table selected:");selectAll||$scope.getVersions()},referenceTaskTableCtrl.selectReference=function(value){referenceTaskTableCtrl.data.forEach((function(el){el.selected=value,referenceTaskTableCtrl.selectionChange(el)})),$scope.getVersions()}},controllerAs:"referenceTaskTableCtrl"}}angular.module("TDM-FE").directive("referenceTaskTable",referenceTaskTable);