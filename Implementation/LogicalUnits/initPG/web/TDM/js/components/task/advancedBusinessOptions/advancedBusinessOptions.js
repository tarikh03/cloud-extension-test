function advancedBusinessOptions(){return{restrict:"E",templateUrl:"js/components/task/advancedBusinessOptions/advancedBusinessOptions.html",scope:{logicalUnits:"=",selected:"=",close:"=",save:"="},controller:function($scope,TDMService,AuthService,toastr){const advancedBusinessOptionsCtrl=this;if(advancedBusinessOptionsCtrl.prodLogicalUnits=_.groupBy(angular.copy($scope.logicalUnits),"product_name"),advancedBusinessOptionsCtrl.prod={},advancedBusinessOptionsCtrl.toggleProds={},advancedBusinessOptionsCtrl.isAllSelected=prod=>{let value=!0;for(let i=0;i<advancedBusinessOptionsCtrl.prodLogicalUnits[prod].length;i++)advancedBusinessOptionsCtrl.prodLogicalUnits[prod][i].selected||(value=!1);advancedBusinessOptionsCtrl.prod[prod]=value},advancedBusinessOptionsCtrl.addClearAllProd=(prod,value)=>{advancedBusinessOptionsCtrl.prodLogicalUnits[prod].forEach(lu=>{lu.selected=value})},advancedBusinessOptionsCtrl.addClearAll=value=>{Object.keys(advancedBusinessOptionsCtrl.prodLogicalUnits).forEach(prod=>{advancedBusinessOptionsCtrl.prod[prod]=value,advancedBusinessOptionsCtrl.addClearAllProd(prod,value)})},$scope.selected&&$scope.selected.length>0){const selectedLUName=$scope.selected.map(it=>it.lu_name);Object.keys(advancedBusinessOptionsCtrl.prodLogicalUnits).forEach(prod=>{advancedBusinessOptionsCtrl.prodLogicalUnits[prod].forEach(lu=>{selectedLUName.indexOf(lu.lu_name)>=0&&(lu.selected=!0)}),advancedBusinessOptionsCtrl.isAllSelected(prod)})}advancedBusinessOptionsCtrl.saveData=()=>{const selectedLUs=[];Object.keys(advancedBusinessOptionsCtrl.prodLogicalUnits).forEach(prod=>{advancedBusinessOptionsCtrl.prodLogicalUnits[prod].forEach(lu=>{lu.selected&&selectedLUs.push(lu)})}),$scope.save(selectedLUs),$scope.close()}},controllerAs:"advancedBusinessOptionsCtrl"}}angular.module("TDM-FE").directive("advancedBusinessOptions",advancedBusinessOptions);