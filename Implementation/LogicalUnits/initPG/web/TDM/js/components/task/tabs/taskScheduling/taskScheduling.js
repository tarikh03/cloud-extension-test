function taskScheduling(){return{restrict:"E",templateUrl:"js/components/task/tabs/taskScheduling/taskScheduling.html",scope:{content:"=",disableChange:"=",form:"=",back:"=",userRole:"=",sourceEnvOwner:"=",targetEnvOwner:"="},controller:function($scope,TDMService,toastr,$timeout,AuthService,$state,DTOptionsBuilder,DTColumnBuilder,$q,$compile){var taskSchedulingCtrl=this;$scope.lastStep=!0,taskSchedulingCtrl.taskData=$scope.content,$scope.currentYear=(new Date).getFullYear(),TDMService.getTDMVersion().then(response=>{$scope.version=response.result}),taskSchedulingCtrl.minDate=new Date,taskSchedulingCtrl.minDate=moment(taskSchedulingCtrl.minDate),taskSchedulingCtrl.minDate.milliseconds(0),taskSchedulingCtrl.minDate.seconds(0),taskSchedulingCtrl.minDate.minutes(0),taskSchedulingCtrl.minDate.hours(0),taskSchedulingCtrl.minDate.add(1,"days"),taskSchedulingCtrl.schedulerOptions={formInputClass:"form-control1 cron-gen-input",formSelectClass:"form-control1 cron-gen-select",formRadioClass:"cron-gen-radio",formCheckboxClass:"cron-gen-checkbox",hideMinutesTab:!1,hideHourlyTab:!1,hideDailyTab:!1,hideWeeklyTab:!1,hideMonthlyTab:!1,hideYearlyTab:!1,hideAdvancedTab:!1,use24HourTime:!0,hideSeconds:!1};var userRole=AuthService.getRole();taskSchedulingCtrl.userRoleType=userRole.type,TDMService.getTimeZone().then((function(response){"SUCCESS"==response.errorCode?taskSchedulingCtrl.timeZoneMessage="Task execution time will be based on "+response.result.current_setting+" time zone":taskSchedulingCtrl.timeZoneMessage="Task execution time will be based on DB time zone"})),"immediate"!==taskSchedulingCtrl.taskData.scheduler&&taskSchedulingCtrl.taskData.scheduler?(taskSchedulingCtrl.selectSchedule="schedule",taskSchedulingCtrl.taskData.scheduler||(taskSchedulingCtrl.taskData.scheduler="0 0/1 * 1/1 * ? *")):taskSchedulingCtrl.selectSchedule="immediate",taskSchedulingCtrl.taskData.scheduling_end_date?(taskSchedulingCtrl.taskData.scheduling_end_date=moment(new Date(taskSchedulingCtrl.taskData.scheduling_end_date)),taskSchedulingCtrl.scheduleEndBy="endBy"):taskSchedulingCtrl.scheduleEndBy="noEndBy"},controllerAs:"taskSchedulingCtrl"}}angular.module("TDM-FE").directive("taskScheduling",taskScheduling);